<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>u4e2_dni</title>
  </head>
  <body>
    <script>
      function comprobarIdentificación(numID) {
        let letrasPosibles = [
          "T",
          "R",
          "W",
          "A",
          "G",
          "M",
          "Y",
          "F",
          "P",
          "D",
          "X",
          "B",
          "N",
          "J",
          "Z",
          "S",
          "Q",
          "V",
          "H",
          "L",
          "C",
          "K",
          "E",
        ];
        //DNI
        if (
          numID[0] != "X" &&
          numID[0] != "Y" &&
          numID[0] != "Z" &&
          Number(numID[0])
        ) {
          let numero = numID.substr(0, 8);
          let letra = numID.substr(8, 1);

          let valorNum = numero % 23;
          valorNum = letrasPosibles[valorNum];
          if (valorNum == letra) {
            return `${numID} es válido`;
          } else {
            return `${numID} no es válido`;
          }
        } /*NIE*/ else {
          let arrayCaracteres = numID.split("");
          if ((arrayCaracteres[0] = "X")) {
            arrayCaracteres[0] = 0;
          } else if ((arrayCaracteres[0] = "Y")) {
            arrayCaracteres[0] = 1;
          } else {
            arrayCaracteres[0] = 2;
          }
          numNIE = arrayCaracteres.join("").substr(0, 8);
          letraNIE = arrayCaracteres.join("").substr(8, 1);
          let valorNum = numNIE % 23;
          valorNum = letrasPosibles[valorNum];

          if (valorNum == letraNIE) {
            return `${numID} es válido`;
          } else {
            return `${numID} no es válido`;
          }
        }
      }
      alert(comprobarIdentificación("56221526G")); //Es válido
      alert(comprobarIdentificación("56221526B")); //No es válido

      alert(comprobarIdentificación("X5997109C")); //Es válido
      alert(comprobarIdentificación("Y7492239A")); //No es válido
    </script>
  </body>
</html>
