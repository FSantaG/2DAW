<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>u089e03_expresionesRegulares</title>
    <style>
      span {
        color: red;
      }
      .alerta {
        background-color: lightcoral;
        border: 2px solid red;
      }
    </style>
  </head>
  <body>
    <form>
      <ul>
        <li>
          <label for="fechaCreacion">Fecha:</label>
          <input type="text" name="fechaCreacion" placeholder="dd/mm/aaaa" />
          <span id="fechaCreacion"></span>
        </li>
        <li>
          <label for="cocinero">Cocinero:</label>
          <input type="text" name="cocinero" placeholder="XX&1234" />
          <span id="cocinero"></span>
        </li>
        <li>
          <label for="destinatario">Destinatario:</label>
          <input type="text" name="destinatario" placeholder="XX_ciudad:1234" />
          <span id="destinatario"></span>
        </li>
        <li>
          <label for="gramos">Gramos:</label>
          <input type="text" name="gramos" placeholder="Min: 100, Máx: 5000" />
          <span id="gramos"></span>
        </li>
        <li>
          <label for="numCuenta">Número de cuenta</label>
          <input type="text" name="numCuenta" />
          <span id="numCuenta"></span>
        </li>
      </ul>
      <input type="submit" name="guardar" value="Guardar Registro" />
    </form>
    <script>
      document.addEventListener("DOMContentLoaded", iniciar);

      function iniciar() {
        let formulario = document.forms[0];
        formulario.onsubmit = function (evento) {
          evento.preventDefault();

          let fechaCreacion = formulario.elements.fechaCreacion;
          let errorFC = document.getElementById("fechaCreacion");
          if (fechaCreacion.value) {
            let validadorFecha =
              /^([0-2][0-9]|3[0-1])\/(0[0-9]|1[0-2])\/[0-9]{4}$/;
            if (!validadorFecha.test(fechaCreacion.value)) {
              errorFC.textContent = "⚠ Introduzca una fecha válida, por favor";
              fechaCreacion.classList.add("alerta");
            } else {
              error.textContent = "";
              fechaCreacion.classList.remove("alerta");
            }
          } else {
            errorFC.textContent = "⚠ Campo obligatorio";
            fechaCreacion.classList.add("alerta");
          }

          let cocinero = formulario.elements.cocinero;
          if (cocinero.value) {
            let validadorCocinero = /^[A-Z]{2}\W[0-9]{4}$/;
            let error = document.getElementById("cocinero");
            if (!validadorCocinero.test(cocinero.value)) {
              let error = document.getElementById("cocinero");
              error.textContent = "⚠ Formato no válido";
              cocinero.classList.add("alerta");
            } else {
              error.textContent = "";
              cocinero.classList.remove("alerta");
            }
          }

          let destinatario = formulario.elements.destinatario;
          if (destinatario.value) {
            let error = document.getElementById("destinatario");
            let validadorDestinatario = /^[A-Z]{2,3}_[a-z]{1,}:[0-9]{4}$/;
            if (!validadorDestinatario.test(destinatario.value)) {
              error.textContent = "⚠ Formato no válido";
              destinatario.classList.add("alerta");
            } else {
              error.textContent = "";
              destinatario.classList.remove("alerta");
            }
          }

          let gramos = formulario.elements.gramos;
          if (gramos.value) {
            let error = document.getElementById("gramos");
            let validadorGramos = /^[1-5][0-9]{3}|[0-9]{3}$/;
            if (!validadorGramos.test(gramos.value)) {
              error.textContent = "⚠ Valor introducido no válido";
              gramos.classList.add("alerta");
            } else {
              error.textContent = "";
              gramos.classList.remove("alerta");
            }
          }
        };
      }
    </script>
  </body>
</html>
